<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Dettagli Contratto Attivo</title>
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.2/css/bootstrap.min.css}" />
</head>
<body class="bg-light">

<div class="container mt-5">

    <!-- Pulsante Torna indietro -->
    <div class="mb-3">
        <a th:href="@{/contracts}" class="btn btn-secondary">&larr; Torna alla lista</a>
    </div>

    <!-- Info Dipendente -->
    <div class="card mb-4 shadow-sm">
        <div class="card-body">
            <h4 class="card-title" th:text="${contract.name}">Nome Cognome</h4>
            <p class="mb-1"><strong>Ruolo:</strong> <span th:text="${contract.role}">Cameriere</span></p>
            <p class="mb-1"><strong>Tipologia Contratto:</strong> <span th:text="${contract.contractType}">Tempo Determinato</span></p>
        </div>
    </div>

    <!-- Sezione Documenti -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="mb-0">Documenti</h5>
        <a class="btn btn-dark" th:href="@{/contracts/{id}/documents/new(id=${contract.id})}">+ Aggiungi Documento</a>
    </div>

    <div class="card shadow-sm">
        <div class="card-body p-0">
            <table class="table table-striped mb-0">
                <thead class="table-dark">
                <tr>
                    <th>Nome File</th>
                    <th>Data Caricamento</th>
                    <th>Azioni</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="doc : ${documents}">
                    <td>
                        <a th:href="@{/contracts/{id}/documents/{docId}/download(id=${contract.id}, docId=${doc.id})}"
                           th:text="${doc.fileName}">contratto.pdf</a>
                    </td>
                    <td th:text="${#temporals.format(doc.uploadDate, 'dd/MM/yyyy')}">05/08/2025</td>
                    <td>
                        <form th:action="@{/contracts/{id}/documents/{docId}/delete(id=${contract.id}, docId=${doc.id})}"
                              method="post" style="display:inline;">
                            <button type="submit" class="btn btn-sm btn-danger" 
                                    onclick="return confirm('Sei sicuro di voler eliminare questo documento?');">
                                Elimina
                            </button>
                        </form>
                    </td>
                </tr>
                <tr th:if="${#lists.isEmpty(documents)}">
                    <td colspan="3" class="text-center text-muted py-3">
                        Nessun documento caricato.
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>

<script th:src="@{/webjars/bootstrap/5.3.2/js/bootstrap.bundle.min.js}"></script>
</body>
</html>
